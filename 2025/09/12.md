## 取り組んだ課題一覧
- Reactに入門した人のためのもっとReactが楽しくなるステップアップコース完全版
	
## わかったこと

#### レンダリングの最適化

- 再レンダリングは以下のときに発生する
	- `state`が更新されたコンポーネントは再レンダリングされる
	- `props`が更新されたコンポーネントは再レンダリングされる
	- 再レンダリングされたコンポーネント配下の子要素は再レンダリングされる
- `memo`を使用することで、そのコンポーネントの`state`や`props`が更新されない限り、再レンダリングされなくなる。基本的にコンポーネントは`memo`を使用するのがよい。
```
import { memo } from "react";

//対象のコンポーネントの関数をmemoで囲う
export const ChildArea = memo(()=>{});
```
- `memo`を使用しても、そのコンポーネントにアロー関数を渡すと、必ず再レンダリングされてしまう。これは、アロー関数は毎回新しい関数を作成しているため、新しい`props`が渡されていると判定されるため。
- 上記の対策として、`useCallback`を使用する
```
import { useState, useCallback } from "react";

// 子コンポーネントに渡す関数をuseCallbackで囲う
// 第二引数は依存配列
const handleClose = useCallback(() => {
    setIsOpen(false);
  }, [])
```
- 変数の再レンダリング防止は`useMemo`を使う（使用場面は多くない）
```
import { useState, useCallback, useMemo } from "react";

// useMemoで関数を囲う
const temp = useMemo(() => 1 + 3, []);
console.log(temp);  // 4
```

#### CSSのあて方

##### インラインスタイル

- インラインスタイル（JSX内専用の表記：値は`""`で囲う、一つずつ`,`で区切る）
```
export const InlineStyle = () => {
  const containerStule = {
    border: "solid 2px #392eff",
    borderRadius: "20px",
    padding: "8px",
    margin: "8px",
    display: "flex",
    justifyContent: "center",
    alignItems: "center",
    gap: "40px"
  };
  const titleStyle = {
    margin: 0,
    color: "#3d84a8"
  };
  const buttonStyle = {
    backgroundColor: "#abedd8",
    border: "none",
    padding: "8px",
    borderRadius: "8px"
  };

  return (
    <div style={containerStule}>
      <p style={titleStyle}>- Inline Styles -</p>
      <button style={buttonStyle}>Fight!</button>
    </div>
  )
}
```

##### CSSモジュール

- `sass`ライブラリを使用する
	- `npm install sass`でインストール
	- `CssModules.module.scss`を作成（`.module.scss`をつける）
	- `CssModules.module.scss`にCSSを記述する（通常の記述方法）
	- `.scss`ファイルをインポートして使用する
```
// jsxファイル
import classes from "./CssModules.module.scss";

export const CssModules = () => {
  return (
    <div className={classes.container}>
      <p className={classes.title}>- CSS Modules -</p>
      <button className={classes.button}>Fight!</button>
    </div>
  )
}


// CssModules.module.scssファイル
.container {
  border: solid 2px #392eff;
  border-radius: 20px;
  padding: 8px;
  margin: 8px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 40px;
}

.title {
  margin: 0;
  color: #3d84a8;
}

.button {
  background-color: #abedd8;
  border: none;
  padding: 8px;
  border-radius: 8px;
  &:hover {
    background-color: #46cdcf;
    color: #fff;
    cursor: pointer;
  }
}

```

##### styled-jsx

- styled-jsx
	- `npm install styled-jsx`でインストール（Next.jsにはデフォルトで入っている。React単体ではインストールが必要）
	- `jsx`ファイルの`style`タグに記述する（`{``}`の中に記述する）
```
export const StyledJsx = () => {
  return (
    <>
      <div className="container">
        <p className="title">- StyledJsx -</p>
        <button className="button">Fight!</button>
      </div>
      <style jsx="true">{`
        .container {
          border: solid 2px #392eff;
           // ...
        }
        
        .title {
          margin: 0;
           // ...
        }

        .button {
          background-color: #abedd8;
           // ...
          }
        }
      `}</style>
    </>
  )
}

```

##### styled-components

- styled-components
	- `npm install styled-components`でインストール
	- TypeScript を使う場合`npm install --save-dev @types/styled-components`
	- `styled-components`をインポートして使用する
```
import styled from "styled-components";

export const StyledComponents = () => {
  return (
    <SContainer>
      <STitle>- Styled Components -</STitle>
      <Sbutton>Fight!</Sbutton>
    </SContainer>
  )
}

// CSS用と分かりやすいように頭にSを付与（ローカルルール）
const SContainer = styled.div`
  border: solid 2px #392eff;
   // ...
`
const STitle = styled.p`
  margin: 0;
   // ...
`
const Sbutton = styled.button`
  background-color: #abedd8;
   // ...
  }
`
```

##### Emotion

- Emotion
	- `npm install @emotion/react @emotion/styled`でインストール（TypeScriptもこれでOK）
	- jsxファイルの先頭にて専用の記述とインポートが必要
	- 通常のCSS記法、JSX内記法、styledの記法の3種類が使える
```
/** @jsxRuntime classic */
/** @jsx jsx */
import { jsx, css } from "@emotion/react";
import styled from "@emotion/styled";

export const Emotion = () => {
  // 通常のCSS記法
  const containerStyle = css`
    border: solid 2px #392eff;
     // ...
  `;

  // JSX内記法
  const titleStyle = css({
    margin: 0,
     // ...
  });

  return (
    <div css={containerStyle}>
      <p css={titleStyle}>- Emotion -</p>
      <SButton>Fight!</SButton>
    </div>
  )
}

const SButton = styled.button`
  background-color: #abedd8;
  // ...
`
```

#### ルーティングの基礎（React Router）

- React Routerはv6で大きく書き方が変わったが、教材はv5のため、変更点は別途キャッチアップが必要
- `npm uninstall react-router-dom react-router`すでに入っている場合はアンインストール
- `npm install react-router-dom@5`v5を指定してインストール
- `react-router-dom`の`Switch`, `Route`,`Link`を使用することでページ遷移を行う
- `useParams`でパラメータを`id`として取得できる
- `useLocation`と`URLSearchParams`でクエリパラメータを取得できる
- `useHistory`でボタンで別ページに遷移したりページを戻ることができる



## 次やること
- Reactに入門した人のためのもっとReactが楽しくなるステップアップコース完全版

## 感じたこと
レンダリングの最適化、CSSのあて方、ルーティングの基礎について学習しました。ルーティングの繋がりを理解するのが難しかったです。



## 学習時間
今日:6h
今週:44.5h 
累計:1009h