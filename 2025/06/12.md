## 取り組んだ課題一覧
- Dockerチュートリアル
- クィックスタート: Compose と Rails


	
## わかったこと

**MySQLの起動**

- コンテナをネットワークに加えるには2つの方法がある
    - コンテナの起動時にネットワークを割り当てる
    - すでに実行しているコンテナをネットワークに接続する

**コンテナの起動時にネットワークを割り当てる**

-  `$ docker network create todo-app`で`todo-app`ネットワークを作成する
-  同じネットワークに接続することで、アプリを連携できる

```
# 接続イメージ
┌──────────────────────┐      ┌──────────────────────┐
│ Node.js コンテナ       │──→── │ MySQL コンテナ         │
│                      │      │                      │
│ MYSQL_HOST = "mysql" │      │ alias = mysql        │
│ ネットワーク: todo-app  │      │ ネットワーク: todo-app  │
└──────────────────────┘      └──────────────────────┘

```

**イメージ構築のベストプラクティス**

- `COPY . .`を`RUN yarn install`の前に書かないことで、2回目以降のビルドはキャッシュを活用し、ビルド時間を短縮できる。
```
# Dockerfile
# syntax=docker/dockerfile:1
FROM node:18-alpine
WORKDIR /app
COPY package.json yarn.lock ./ ←jsonとlockファイルをカレントディレクトリにコピーする
RUN yarn install --production ←上のファイルについて、前回のビルドから変化がなければインストールはスキップされる
COPY . . ←全ファイルをコピーする
CMD ["node", "src/index.js"]
```
- Dockerfile と同じディレクトリ内に `.dockerignore`という名前でファイルを作成し`node_modules`と記載する。そうすることで`node_modules`ファイルは`COPY . .`で無視されるため、コンテナに含まれなくなる。



次やること
クィックスタート: Compose と Rails　続き
	

## 感じたこと
キャッシュの活用についてやっと理解ができました。
コンテナの連携は、どこが繋がっているのかまだよく理解ができていないです。焦らず、時間をかけて取り組みたいと思います。



## 学習時間
今日:6.5h
今週:39.5h 
累計:405.5h